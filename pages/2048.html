<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2048</title>
</head>
<body>
    <h1>2048っぽいやつ</h1>
    <table align="center" id="boxes">
        <tr>
            <td id="0" onclick="game(0)"></td>
            <td id="1" onclick="game(1)"></td>
            <td id="2" onclick="game(2)"></td>
            <td id="3" onclick="game(3)"></td>
        </tr>
        <tr>
            <td id="4" onclick="game(4)"></td>
            <td id="5" onclick="game(5)"></td>
            <td id="6" onclick="game(6)"></td>
            <td id="7" onclick="game(7)"></td>
        </tr>
        <tr>
            <td id="8" onclick="game(8)"></td>
            <td id="9" onclick="game(9)"></td>
            <td id="10" onclick="game(10)"></td>
            <td id="11" onclick="game(11)"></td>
        </tr>
        <tr>
            <td id="12" onclick="game(12)"></td>
            <td id="13" onclick="game(13)"></td>
            <td id="14" onclick="game(14)"></td>
            <td id="15" onclick="game(15)"></td>
        </tr>
</table>
<div class="scores">
<div id="scoreboard" class="scoreboard">Score</div>
<div id="score" class="score">0</div>
</div>
    <button type="button" onclick="risetto()">New Game</button>
    <div id="x0" align="center"></div>
    <div id="x1" align="center"></div>
    <div id="x2" align="center"></div>
    <div id="x3" align="center"></div>

</body>
</html>
<script>
    var box =[
            [0,0,0,0],
            [0,0,0,0],
            [0,0,0,0],
            [0,0,0,0]
        ];
        var totalScore = 0;

        function risetto(){
            for(var i = 3;i >= 0;i--){
                for(var j = 3;j >= 0;j--){
                    box[i][j] = 0;
                    var n = document.getElementById(i * 4 + j);
                    n.style.background = 'white';
                    n.textContent = "";

                }
            }

        }

    document.onkeydown = keydown;
    function keydown(event){
        //右に動かす
        if(event.which == 39){
            for(var int = 2;int >= 0;int--){
                for(var i = 3;i >= 0;i--){
                    for(var j = 2;j >= 0;j--){
                        for(l = 1;l <= 11;l++){
                            if(box[i][j + 1] == 2 && box[i][j] == 2){
                                box[i][j + 1] = 4;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = '#ffe4e1';
                                n1.textContent = "4";
                            }
                            if(box[i][j + 1] == 4 && box[i][j] == 4){
                                box[i][j + 1] = 8;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'pink';
                                n1.textContent = "8";
                            }
                            if(box[i][j + 1] == 8 && box[i][j] == 8){
                                box[i][j + 1] = 16;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'violet';
                                n1.textContent = "16";
                            }
                            if(box[i][j + 1] == 16 && box[i][j] == 16){
                                box[i][j + 1] = 32;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'lightcoral';
                                n1.textContent = "32";
                            }
                            if(box[i][j + 1] == 32 && box[i][j] == 32){
                                box[i][j + 1] = 64;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'gold';
                                n1.textContent = "64";
                            }
                            if(box[i][j + 1] == 64 && box[i][j] == 64){
                                box[i][j + 1] = 128;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'greenyellow';
                                n1.textContent = "128";
                            }
                            if(box[i][j + 1] == 128 && box[i][j] == 128){
                                box[i][j + 1] = 256;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'aquamarine';
                                n1.textContent = "256";
                            }
                            if(box[i][j + 1] == 256 && box[i][j] == 256){
                                box[i][j + 1] = 512;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'cyan';
                                n1.textContent = "512";
                            }
                            if(box[i][j + 1] == 512 && box[i][j] == 512){
                                box[i][j + 1] = 1024;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'deepskyblue';
                                n1.textContent = "1024";
                            }
                            if(box[i][j + 1] == 1024 && box[i][j] == 1024){
                                box[i][j + 1] = 2048;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'black';
                                n1.textContent = "2048";
                            }
                            else if(box[i][j + 1] == 0 && box[i][j] == 2 ** l){
                                box[i][j + 1] = box[i][j];
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.textContent = 2 ** l;
                                if(box[i][j + 1] == 2){
                                    n1.style.background = '#fffacd';
                                }
                                if(box[i][j + 1] == 4){
                                    n1.style.background = '#ffe4e1';
                                }
                                if(box[i][j + 1] == 8){
                                    n1.style.background = 'pink';
                                }
                                if(box[i][j + 1] == 16){
                                    n1.style.background = 'violet';
                                }
                                if(box[i][j + 1] == 32){
                                    n1.style.background = 'lightcoral';
                                }
                                if(box[i][j + 1] == 64){
                                    n1.style.background = 'gold';                                
                                }
                                if(box[i][j + 1] == 128){
                                    n1.style.background = 'greenyellow';
                                }
                                if(box[i][j + 1] == 256){
                                    n1.style.background = 'aquamarine';
                                }
                                if(box[i][j + 1] == 512){
                                    n1.style.background = 'cyan';
                                }
                                if(box[i][j + 1] == 1024){
                                    n1.style.background = 'deepskyblue';
                                }
                                if(box[i][j + 1] == 2048){
                                    n1.style.background = 'black';
                                }

                            }
                        }
                    }
                }
            }
            //rn = random number
            var rn = Math.floor(Math.random() * 16);
            var x = Math.floor(rn % 4);
            var y = Math.floor(rn / 4);
            if(box[y][x] !== 0){
                keydown(event);
            }
            else if(box[y][x] == 0){
                box[y][x] = 2;
            }
            for(var i = 0;i < 4;i++){
                for(var j = 0;j < 4;j++){
                    if(box[i][j] == 2){
                        var n = document.getElementById(i * 4 + j);
                        n.style.background = '#fffacd';
                        n.textContent = "2";
                    }
                }
            }
        }
        //下に動かす
        if(event.which == 40){
            for(var int = 2;int >= 0;int--){
                for(var i = 2;i >= 0;i--){
                    for(var j = 0;j < 4;j++){
                        for(l = 1;l <= 11;l++){
                        if(box[i + 1][j] == 2 && box[i][j] == 2){
                            box[i + 1][j] = 4;
                            box[i][j] = 0;
                            var n = document.getElementById(i * 4 + j);
                            var n1 = document.getElementById(i * 4 + j + 4);
                            n.style.background = 'white';
                            n.textContent = "";
                            n1.style.background = '#ffe4e1';
                            n1.textContent = "4";
                        }
                        if(box[i + 1][j] == 4 && box[i][j] == 4){
                            box[i + 1][j] = 8;
                            box[i][j] = 0;
                            var n = document.getElementById(i * 4 + j);
                            var n1 = document.getElementById(i * 4 + j + 4);
                            n.style.background = 'white';
                            n.textContent = "";
                            n1.style.background = 'pink';
                            n1.textContent = "8";
                        }
                        if(box[i + 1][j] == 8 && box[i][j] == 8){
                            box[i + 1][j] = 16;
                            box[i][j] = 0;
                            var n = document.getElementById(i * 4 + j);
                            var n1 = document.getElementById(i * 4 + j + 4);
                            n.style.background = 'white';
                            n.textContent = "";
                            n1.style.background = 'violet';
                            n1.textContent = "16";
                        }
                        if(box[i + 1][j] == 16 && box[i][j] == 16){
                                box[i + 1][j] = 32;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'lightcoral';
                                n1.textContent = "32";
                        }
                        if(box[i + 1][j] == 32 && box[i][j] == 32){
                                box[i + 1][j] = 64;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'gold';
                                n1.textContent = "64";
                        }
                        if(box[i + 1][j] == 64 && box[i][j] == 64){
                                box[i + 1][j] = 128;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'greenyellow';
                                n1.textContent = "128";
                        }
                        if(box[i + 1][j] == 128 && box[i][j] == 128){
                                box[i + 1][j] = 256;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'aquamarine';
                                n1.textContent = "256";
                        }
                        if(box[i + 1][j] == 256 && box[i][j] == 256){
                                box[i + 1][j] = 512;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'cyan';
                                n1.textContent = "512";
                        }
                        if(box[i + 1][j] == 512 && box[i][j] == 512){
                                box[i + 1][j] = 1024;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'deepskyblue';
                                n1.textContent = "1024";
                        }
                        if(box[i + 1][j] == 1024 && box[i][j] == 1024){
                                box[i + 1][j] = 2048;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j + 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'black';
                                n1.textContent = "2048";
                        }
                        else if(box[i + 1][j] == 0 && box[i][j] == 2 ** l){
                            box[i + 1][j] = box[i][j];
                            box[i][j] = 0;
                            var n = document.getElementById(i * 4 + j);
                            var n1 = document.getElementById(i * 4 + j + 4);
                            n.style.background = 'white';
                            n.textContent = "";
                            n1.textContent = 2 ** l;
                            if(box[i + 1][j] == 2){
                                n1.style.background = '#fffacd';                                
                            }
                            if(box[i + 1][j] == 4){
                                n1.style.background = '#ffe4e1';
                            }
                            if(box[i + 1][j] == 8){
                                n1.style.background = 'pink';
                            }
                            if(box[i + 1][j] == 16){
                                n1.style.background = 'violet';
                            }
                            if(box[i + 1][j] == 32){
                                n1.style.background = 'lightcoral';
                            }
                            if(box[i + 1][j] == 64){
                                n1.style.background = 'gold';                                
                            }
                            if(box[i + 1][j] == 128){
                                n1.style.background = 'greenyellow';
                            }
                            if(box[i + 1][j] == 256){
                                n1.style.background = 'aquamarine';
                            }
                            if(box[i + 1][j] == 512){
                                n1.style.background = 'cyan';
                            }
                            if(box[i + 1][j] == 1024){
                                n1.style.background = 'deepskyblue';
                            }
                            if(box[i + 1][j] == 2048){
                                n1.style.background = 'black';
                            }
                        }
                    }
                    }
                }
            }
            //rn = random number
            var rn = Math.floor(Math.random() * 16);
            var x = Math.floor(rn % 4);
            var y = Math.floor(rn / 4);
            if(box[y][x] !== 0){
                keydown(event);
            }
            else if(box[y][x] == 0){
                box[y][x] = 2;
            }
            for(var i = 0;i < 4;i++){
                for(var j = 0;j < 4;j++){
                    if(box[i][j] == 2){
                        var n = document.getElementById(i * 4 + j);
                        n.style.background = '#fffacd';
                        n.textContent = "2";
                    }
                }
            }
        }
        //左に動かす
        if(event.which == 37){
            for(var int = 0;int < 3;int++){
                for(var i = 0;i < 4;i++){
                    for(var j = 0;j < 4;j++){
                        for(l = 1;l <= 11;l++){
                        if(box[i][j - 1] == 2 && box[i][j] == 2){
                            box[i][j - 1] = 4;
                            box[i][j] = 0;
                            var n = document.getElementById(i * 4 + j);
                            var n1 = document.getElementById(i * 4 + j - 1);
                            n.style.background = 'white';
                            n.textContent = "";
                            n1.style.background = '#ffe4e1';
                            n1.textContent = "4";
                        }
                        if(box[i][j - 1] == 4 && box[i][j] == 4){
                            box[i][j - 1] = 8;
                            box[i][j] = 0;
                            var n = document.getElementById(i * 4 + j);
                            var n1 = document.getElementById(i * 4 + j - 1);
                            n.style.background = 'white';
                            n.textContent = "";
                            n1.style.background = 'pink';
                            n1.textContent = "8";
                        }
                        if(box[i][j - 1] == 8 && box[i][j] == 8){
                            box[i][j - 1] = 16;
                            box[i][j] = 0;
                            var n = document.getElementById(i * 4 + j);
                            var n1 = document.getElementById(i * 4 + j - 1);
                            n.style.background = 'white';
                            n.textContent = "";
                            n1.style.background = 'violet';
                            n1.textContent = "16";
                        }
                        if(box[i][j - 1] == 16 && box[i][j] == 16){
                                box[i][j - 1] = 32;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'lightcoral';
                                n1.textContent = "32";
                        }
                        if(box[i][j - 1] == 32 && box[i][j] == 32){
                                box[i][j - 1] = 64;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'gold';
                                n1.textContent = "64";
                        }
                        if(box[i][j - 1] == 64 && box[i][j] == 64){
                                box[i][j - 1] = 128;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'greenyellow';
                                n1.textContent = "128";
                        }
                        if(box[i][j - 1] == 128 && box[i][j] == 128){
                                box[i][j - 1] = 256;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'aquamarine';
                                n1.textContent = "256";
                        }
                        if(box[i][j - 1] == 256 && box[i][j] == 256){
                                box[i][j - 1] = 512;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'cyan';
                                n1.textContent = "512";
                        }
                        if(box[i][j - 1] == 512 && box[i][j] == 512){
                                box[i][j - 1] = 1024;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'deepskyblue';
                                n1.textContent = "1024";
                        }
                        if(box[i][j - 1] == 1024 && box[i][j] == 1024){
                                box[i][j - 1] = 2048;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'black';
                                n1.textContent = "2048";
                        }

                        else if(box[i][j - 1] == 0 && box[i][j] == 2 ** l){
                                box[i][j - 1] = box[i][j];
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 1);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.textContent = 2 ** l;
                                if(box[i][j - 1] == 2){
                                    n1.style.background = '#fffacd';
                                }
                                if(box[i][j - 1] == 4){
                                    n1.style.background = '#ffe4e1';
                                }
                                if(box[i][j - 1] == 8){
                                    n1.style.background = 'pink';
                                }
                                if(box[i][j - 1] == 16){
                                    n1.style.background = 'violet';
                                }
                                if(box[i][j - 1] == 32){
                                    n1.style.background = 'lightcoral';
                                }
                                if(box[i][j - 1] == 64){
                                    n1.style.background = 'gold';                                
                                }
                                if(box[i][j - 1] == 128){
                                    n1.style.background = 'greenyellow';
                                }
                                if(box[i][j - 1] == 256){
                                    n1.style.background = 'aquamarine';
                                }
                                if(box[i][j - 1] == 512){
                                    n1.style.background = 'cyan';
                                }
                                if(box[i][j - 1] == 1024){
                                    n1.style.background = 'deepskyblue';
                                }
                                if(box[i][j - 1] == 2048){
                                    n1.style.background = 'black';
                                }
                            }
                        }   
                    }
                }
            }
            //rn = random number
            var rn = Math.floor(Math.random() * 16);
            var x = Math.floor(rn % 4);
            var y = Math.floor(rn / 4);
            if(box[y][x] !== 0){
                keydown(event);
            }
            else if(box[y][x] == 0){
                box[y][x] = 2;
            }
            for(var i = 0;i < 4;i++){
                for(var j = 0;j < 4;j++){
                    if(box[i][j] == 2){
                        var n = document.getElementById(i * 4 + j);
                        n.style.background = '#fffacd';
                        n.textContent = "2";
                    }
                }
            }
        }
        //上に動かす
        if(event.which == 38){
            for(var int = 0;int < 3;int++){        
                for(var i = 1;i < 4;i++){
                    for(var j = 0;j < 4;j++){
                        for(l = 1;l <= 11;l++){
                        if(box[i - 1][j] == 2 && box[i][j] == 2){
                            box[i - 1][j] = 4;
                            box[i][j] = 0;
                            var n = document.getElementById(i * 4 + j);
                            var n1 = document.getElementById(i * 4 + j - 4);
                            n.style.background = 'white';
                            n.textContent = "";
                            n1.style.background = '#ffe4e1';
                            n1.textContent = "4";
                        }
                        if(box[i - 1][j] == 4 && box[i][j] == 4){
                            box[i - 1][j] = 8;
                            box[i][j] = 0;
                            var n = document.getElementById(i * 4 + j);
                            var n1 = document.getElementById(i * 4 + j - 4);
                            n.style.background = 'white';
                            n.textContent = "";
                            n1.style.background = 'pink';
                            n1.textContent = "8";
                        }
                        if(box[i - 1][j] == 8 && box[i][j] == 8){
                            box[i - 1][j] = 16;
                            box[i][j] = 0;
                            var n = document.getElementById(i * 4 + j);
                            var n1 = document.getElementById(i * 4 + j - 4);
                            n.style.background = 'white';
                            n.textContent = "";
                            n1.style.background = 'violet';
                            n1.textContent = "16";
                        }
                        if(box[i - 1][j] == 16 && box[i][j] == 16){
                                box[i - 1][j] = 32;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'lightcoral';
                                n1.textContent = "32";
                        }
                        if(box[i - 1][j] == 32 && box[i][j] == 32){
                                box[i - 1][j] = 64;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'gold';
                                n1.textContent = "64";
                        }
                        if(box[i - 1][j] == 64 && box[i][j] == 64){
                                box[i - 1][j] = 128;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'greenyellow';
                                n1.textContent = "128";
                        }
                        if(box[i - 1][j] == 128 && box[i][j] == 128){
                                box[i - 1][j] = 256;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'aquamarine';
                                n1.textContent = "256";
                        }
                        if(box[i - 1][j] == 256 && box[i][j] == 256){
                                box[i - 1][j] = 512;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'cyan';
                                n1.textContent = "512";
                        }
                        if(box[i - 1][j] == 512 && box[i][j] == 512){
                                box[i - 1][j] = 1024;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'deepskyblue';
                                n1.textContent = "1024";
                        }
                        if(box[i - 1][j] == 1024 && box[i][j] == 1024){
                                box[i - 1][j] = 2048;
                                box[i][j] = 0;
                                var n = document.getElementById(i * 4 + j);
                                var n1 = document.getElementById(i * 4 + j - 4);
                                n.style.background = 'white';
                                n.textContent = "";
                                n1.style.background = 'black';
                                n1.textContent = "2048";
                        }

                        else if(box[i - 1][j] == 0 && box[i][j] == 2 ** l){
                            box[i - 1][j] = box[i][j];
                            box[i][j] = 0;
                            var n = document.getElementById(i * 4 + j);
                            var n1 = document.getElementById(i * 4 + j - 4);
                            n.style.background = 'white';
                            n.textContent = "";
                            n1.textContent = 2 ** l;
                            if(box[i - 1][j] == 2){
                                n1.style.background = '#fffacd';                                }
                            if(box[i - 1][j] == 4){
                                n1.style.background = '#ffe4e1';
                            }
                            if(box[i - 1][j] == 8){
                                n1.style.background = 'pink';
                            }
                            if(box[i - 1][j] == 16){
                                n1.style.background = 'violet';
                            }
                            if(box[i - 1][j] == 32){
                                n1.style.background = 'lightcoral';
                            }
                            if(box[i - 1][j] == 64){
                                n1.style.background = 'gold';                                
                            }
                            if(box[i - 1][j] == 128){
                                n1.style.background = 'greenyellow';
                            }
                            if(box[i - 1][j] == 256){
                                n1.style.background = 'aquamarine';
                            }
                            if(box[i - 1][j] == 512){
                                n1.style.background = 'cyan';
                            }
                            if(box[i - 1][j] == 1024){
                                n1.style.background = 'deepskyblue';
                            }
                            if(box[i - 1][j] == 2048){
                                n1.style.background = 'black';
                            }
                        }
                    }
                }
            }
        }
            //rn = random number
            var rn = Math.floor(Math.random() * 16);
            var x = Math.floor(rn % 4);
            var y = Math.floor(rn / 4);
            if(box[y][x] !== 0){
                keydown(event);
            }
            else if(box[y][x] == 0){
                box[y][x] = 2;
            }
            for(var i = 0;i < 4;i++){
                for(var j = 0;j < 4;j++){
                    if(box[i][j] == 2){
                        var n = document.getElementById(i * 4 + j);
                        n.style.background = '#fffacd';
                        n.textContent = "2";
                    }
                }
            }
        }
        
        totalScore = 0;
        for(var i = 0;i < 4;i++){
                for(var j = 0;j < 4;j++){
                    totalScore += box[i][j];
                    score.innerHTML = totalScore;
                }
            }
    }
</script>
<style>
    body{
        text-align: center;
        background-color: rgb(255, 249, 238);
    }
    td{
        width: 100px;
        height: 100px;
        border: rgb(99, 99, 99) 3px solid;
        background-color: white;
    }
    td{
        text-align: center;
        font-size: 30px;
    }
    button{
        height: 70px;
        width: 400px;
        background-color: white;
        font-family: "ヒラギノ丸ゴ ProN";
        font-size: 30px;
    }
    .score{
        height: 70px;
        width: 200px;
        font-family: "ヒラギノ丸ゴ ProN";
        font-size: 30px;
    }
    .scoreboard{
        height: 70px;
        width: 200px;
        
        font-family: "ヒラギノ丸ゴ ProN";
        font-size: 30px;

    }
    .scores{
        height: 70px;
        width: 400px;
        display: flex;
        margin-top: 70px;
        margin-right: auto;
        margin-left: auto;
    }
</style>